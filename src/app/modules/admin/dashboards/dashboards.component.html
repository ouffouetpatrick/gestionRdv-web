<div class="flex flex-col flex-auto min-w-0">
    <!-- Main -->
    <div class="flex-auto border-t -mt-px pt-4 sm:pt-6">
        <div class="w-full max-w-screen-xl mx-auto">
            <!-- Tabs -->
            <mat-tab-group class="sm:px-2" [animationDuration]="'0'">
                <!-- Home -->
                <mat-tab label="Indicateurs">
                    <ng-template matTabContent>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 w-full min-w-0">
                            <!-- Visites en Attentes -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <!-- <div class="text-lg font-medium tracking-tight leading-6 truncate">Summary</div> -->
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div
                                        class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-blue-500">
                                        {{visite.length}}</div>
                                    <div class="text-lg font-medium text-blue-600 dark:text-blue-500">
                                        Visites en Attentes
                                    </div>

                                </div>
                            </div>
                            <!-- Visites validées -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <!-- <div class="text-lg font-medium tracking-tight leading-6 truncate">Features</div> -->
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div
                                        class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-green-500">
                                        {{totalData.totalValide}}</div>
                                    <div class="text-lg font-medium text-green-600 dark:text-green-500">
                                        Visites validées
                                    </div>
                                    <!-- <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">Implemented:</div>
                                        <div class="ml-1.5 text-lg font-semibold">16</div>
                                    </div> -->
                                </div>
                            </div>
                            <!--  Visites Rejetées -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <!-- <div class="text-lg font-medium tracking-tight leading-6 truncate">Overdue</div> -->
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div
                                        class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-red-500">
                                        {{totalData.totalRejete}}</div>
                                    <div class="text-lg font-medium text-red-600 dark:text-red-500">
                                        Visites Rejetées
                                    </div>
                                    <!-- <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">From yesterday:</div>
                                        <div class="ml-1.5 text-lg font-semibold">9</div>
                                    </div> -->
                                </div>
                            </div>
                            <!-- Visites effectuées -->
                            <div class="flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex items-start justify-between">
                                    <!-- <div class="text-lg font-medium tracking-tight leading-6 truncate">Issues</div> -->
                                </div>
                                <div class="flex flex-col items-center mt-2">
                                    <div
                                        class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-amber-500">
                                        {{totalData.totalTermine}}</div>
                                    <div class="text-lg font-medium text-amber-600 dark:text-amber-500">
                                        Visites effectuées
                                    </div>
                                    <!-- <div class="flex items-baseline justify-center w-full mt-5 text-secondary">
                                        <div class="text-md font-medium truncate">Closed today:</div>
                                        <div class="ml-1.5 text-lg font-semibold">19</div>
                                    </div> -->
                                </div>
                            </div>
                            <!-- Budget details -->
                            <div
                                class="sm:col-span-6 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="text-lg font-medium tracking-tight leading-6 truncate">Visites récentes
                                </div>
                                <div class="flex flex-col flex-auto mt-2 overflow-x-auto">
                                    <table mat-table [dataSource]="dataSource" matSort class="w-full">
                                        <!-- Position Column -->
                                        <ng-container matColumnDef="dateRdv">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date du RDV </th>
                                            <td mat-cell *matCellDef="let element">{{element?.date | date:'dd/MM/yyyy'}}
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="heure">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Heure </th>
                                            <td mat-cell *matCellDef="let element">{{element?.date | date:'HH:mm'}}</td>
                                        </ng-container>

                                        <!-- objet Column -->
                                        <ng-container matColumnDef="objet">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Objet </th>
                                            <td mat-cell *matCellDef="let element">{{element?.objet}}</td>
                                        </ng-container>

                                        <!-- datecreation Column -->
                                        <ng-container matColumnDef="datecreation">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date création </th>
                                            <td mat-cell *matCellDef="let element">{{element.dateCreation | date:'dd/MM/yyyy'}}</td>
                                        </ng-container>

                                        <tr class="z-10 sticky top-0 gap-4 py-4 px-6 md:px-8 text-md font-semibold text-white bg-light dark:bg-black dark:bg-opacity-5"
                                            mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                                        <tr class="mat-row" *matNoDataRow>
                                            <td class="mat-cell text-center h-32" colspan="6">
                                                Aucun élément
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </mat-tab>
                <!-- Budget -->
                <mat-tab label="Graphes">
                    <ng-template matTabContent>
                        <div class="grid grid-cols-1 sm:grid-cols-1 gap-6 w-full min-w-0">
                            <!-- Section title -->
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-8 w-full mt-6 md:mt-8">
                                <!-- New vs. Returning -->
                                <div class="flex flex-col flex-auto bg-card shadow rounded-md overflow-hidden p-6 mr-5">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate">Visites
                                        </div>
                                    </div>
                                    <div class="flex flex-col flex-auto mt-6 h-44">
                                        <apx-chart class="flex flex-auto items-center justify-center w-full h-full"
                                            [chart]="chartVisite.chart" [colors]="chartVisite.colors"
                                            [labels]="chartVisite.labels" [plotOptions]="chartVisite.plotOptions"
                                            [series]="chartVisite.series" [states]="chartVisite.states"
                                            [tooltip]="chartVisite.tooltip">
                                        </apx-chart>
                                    </div>
                                    <div class="mt-8">
                                        <div class="-my-3 divide-y">
                                            <ng-container *ngFor="let dataset of chartVisite.series; let i = index">
                                                <div class="grid grid-cols-3 py-3">
                                                    <div class="flex items-center">
                                                        <div class="flex-0 w-2 h-2 rounded-full"
                                                            [style.backgroundColor]="chartVisite.colors[i]"></div>
                                                        <div class="ml-3 truncate">{{chartVisite.labels[i]}}</div>
                                                    </div>
                                                    <div class="font-medium text-right">{{dataset | number:'1.0-0'}}
                                                    </div>
                                                    <div class="text-right text-secondary">{{dataset !== 0 ? (dataset *
                                                        100 / this.totalData.total |
                                                        number:'1.1-1') : 0 | number:'1.1-1'}}%</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                                <!-- Gender -->
                                <div class="flex flex-col flex-auto bg-card shadow rounded-md overflow-hidden p-6 mr-5">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate">Les 4
                                            employés les plus sollicités
                                        </div>
                                    </div>
                                    <div class="flex flex-col flex-auto mt-6 h-44">
                                        <apx-chart class="flex flex-auto items-center justify-center w-full h-full"
                                            [chart]="chartEmployeSolicite.chart" 
                                            [colors]="chartEmployeSolicite.colors"
                                            [labels]="chartEmployeSolicite.labels"
                                            [plotOptions]="chartEmployeSolicite.plotOptions"
                                            [series]="chartEmployeSolicite.series"
                                            [states]="chartEmployeSolicite.states"
                                            [tooltip]="chartEmployeSolicite.tooltip">
                                        </apx-chart>
                                    </div>
                                    <div class="mt-8">
                                        <div class="-my-3 divide-y">
                                            <ng-container
                                                *ngFor="let dataset of chartEmployeSolicite.series; let i = index">
                                                <div class="grid grid-cols-3 py-3">
                                                    <div class="flex items-center">
                                                        <div class="flex-0 w-2 h-2 rounded-full"
                                                            [style.backgroundColor]="chartEmployeSolicite.colors[i]">
                                                        </div>
                                                        <div class="ml-3 truncate">{{chartEmployeSolicite.labels[i]}}
                                                        </div>
                                                    </div>
                                                    <div class="font-medium text-right">{{dataset | number:'1.0-0'}}
                                                    </div>
                                                    <div class="text-right text-secondary">{{dataset !== 0 ? (dataset *
                                                        100 / this.totalDataVisEmploye.total |
                                                        number:'1.1-1') : 0 | number:'1.1-1'}}%</div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</div>